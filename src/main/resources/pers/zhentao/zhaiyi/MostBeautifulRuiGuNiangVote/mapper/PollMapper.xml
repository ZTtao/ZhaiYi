<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="pers.zhentao.zhaiyi.MostBeautifulRuiGuNiangVote.mapper.PollMapper">
    <resultMap id="BaseResultMap" type="pers.zhentao.zhaiyi.MostBeautifulRuiGuNiangVote.dto.Poll">
        <result column="poll_id" property="pollId" jdbcType="INTEGER"/>
        <result column="competitor_id" property="competitorId" jdbcType="INTEGER"/>
        <result column="open_id" property="openId" jdbcType="VARCHAR"/>
        <result column="created_date" property="createdDate" jdbcType="TIMESTAMP"/>
    </resultMap>
    <select id="selectTotal" resultType="java.lang.Integer">
        select count(*) FROM mbrgnv_poll
    </select>
    <select id="countByCompetitorId" resultType="java.lang.Integer">
        select count(*) FROM mbrgnv_poll WHERE competitor_id=#{competitorId}
    </select>
    <select id="countAfterDay" resultType="java.lang.Integer">
        select count(*) FROM mbrgnv_poll
        WHERE open_id = #{openId} AND DATE(created_date) > #{day}
    </select>
    <insert id="insert" parameterType="pers.zhentao.zhaiyi.MostBeautifulRuiGuNiangVote.dto.Poll">
        INSERT INTO mbrgnv_poll(open_id,competitor_id)VALUES (#{dto.openId},#{dto.competitorId})
    </insert>
</mapper>